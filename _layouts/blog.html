<!DOCTYPE html>
<html>
  {% include head.html %}

  <body>
    {% include header.html %}

    <div class="page-content">
      <div class="wrapper">
        <div class="blog">
          <h1 class="page-heading"><em><strong>{{ page.title}}</strong></em></h1>
          <em>{{ content }}</em>

          <!-- 현재 tag 목록 나열 -->
          <div class="current-tags">
            <ul class="tag-list">
              <li class="tag-item" onclick="showAllPosts()">Total({{site.posts.size}})</li>
              {% for tag in site.tags %}
                <li class="tag-item" onclick="showPosts('{{ tag[0] }}')">{{ tag[0] }}({{ tag[1].size }})</li>
              {% endfor %}
            </ul>
          </div>
          <!-- 현재 tag 목록 나열 끝 -->
          <div class="blog-post-list">
            {% for post in site.posts %}
              {% if post.draft != true %}
                <div class="blog-post" data-tags="{% for tag in post.tags %}{{ tag }}{% if forloop.last %}{% else %},{% endif %}{% endfor %}">
                  <span class="blog-post-date">{{ post.date | date: "%-m/%-d, %Y" }}</span>
                  <a href="{{ post.url | replace:".html","" | prepend: site.baseurl }}" class="blog-post-title">
                    {{ post.title }}
                  </a>
                  <div class="blog-post-content">
                    {{ post.content | truncatewords:40 }}
                  </div>
                  <br>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>
      </div>
    </div>

    {% include footer.html %}

    {% include foot.html %}
    
    <script>
      function showAllPosts() {
        var blogPostList = document.getElementsByClassName("blog-post-list")[0];
        var blogPosts = blogPostList.getElementsByClassName("blog-post");
        
        // 모든 게시물 보이도록 설정
        for (var i = 0; i < blogPosts.length; i++) {
          blogPosts[i].style.display = "block";
        }
      }
      
      function showPosts(tag) {
        var blogPostList = document.getElementsByClassName("blog-post-list")[0];
        var blogPosts = blogPostList.getElementsByClassName("blog-post");
        
        // 모든 게시물 숨기기
        for (var i = 0; i < blogPosts.length; i++) {
          blogPosts[i].style.display = "none";
        }
        
        // 선택된 태그를 포함하는 게시물만 보이도록 설정
        var selectedPosts = blogPostList.querySelectorAll('[data-tags*="' + tag + '"]');
        for (var j = 0; j < selectedPosts.length; j++) {
          selectedPosts[j].style.display = "block";
        }
      }
    </script>
  </body>
</html>
